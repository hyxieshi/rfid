import{_ as b,b as D,a as S,e as c,u as j,r as k,o as d,c as p,d as t,t as a,w as f,i as U,m as v,v as A,F as B,j as C,q as T,s as V}from"./index-145879c3.js";const F=r=>(T("data-v-575997b8"),r=r(),V(),r),N={class:"body"},R={class:"msg"},$={style:{width:"100%",display:"flex","flex-direction":"column","align-content":"flex-start","flex-wrap":"wrap"}},q=F(()=>t("span",null,null,-1)),E=["src"],L={__name:"Details",setup(r){const m=D(),g=S(),h=c(g.params.id),_=j(),s=k({userinfo:{},history:[]}),x=()=>{fetch("/api/getUser?id="+h.value).then(e=>e.json()).then(e=>{s.userinfo=e,y(e._id).then(o=>{s.history=o})})},y=e=>new Promise((o,n)=>{fetch("/api/id?id="+e).then(u=>u.json()).then(u=>{o(u)})}),w=e=>e?_.Url+"/file?id="+e:"",l=c(""),i=c(!1),I=()=>{i.value?fetch(`/api/updateIdUser?id=${h.value}&rfid=${l.value}`).then(e=>(console.log(e),e.json())).then(e=>{console.log(e),_.ShowTip("补卡成功").then(o=>{m.push("/Index")})}):i.value=!0};return x(),(e,o)=>(d(),p("div",N,[t("nav",null,[t("h3",null,"ID:"+a(s.userinfo.rfid),1),t("h3",null,"名字："+a(s.userinfo.name),1),t("h3",null,"备注："+a(s.userinfo.remark),1),t("h3",null,"创建时间："+a(s.userinfo.createdAtChina),1),f(t("div",null,[v("新Id："),f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>l.value=n)},null,512),[[A,l.value]])],512),[[U,i.value]]),t("button",{style:{"margin-top":"20px"},onClick:I},"补卡")]),t("div",R,[(d(!0),p(B,null,C(s.history,n=>(d(),p("div",{key:n._id,style:{"border-bottom":"1px solid #c6c6c6","margin-bottom":"10px"}},[t("h3",$,[t("span",null,"记录时间："+a(n.createdAtChina),1),v("备注信息："+a(n.title),1),q]),t("img",{src:w(n.imgurl),alt:""},null,8,E)]))),128))])]))}},P=b(L,[["__scopeId","data-v-575997b8"]]);export{P as default};
